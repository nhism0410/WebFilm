{% extends 'home/base.html' %}
{% load static %}
{% block home %}

<main id="main-contents" class="col-xs-12 col-sm-12 col-md-8 p-2">
    <!-- Start Carousel -->
    <div id="carouselExampleCaptions" class="carousel slide m-3" data-bs-ride="carousel">
      <div class="carousel-inner" data-bs-interval="true">
          <div class="carousel-item ">
              <div class="row">
                  <div class="col">
                      <img src="https://th.bing.com/th/id/OIP.MgnmS2dzOO-VuBTPJibR0gHaEK?w=321&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" class="d-block w-100" alt="...">
                      <div class="carousel-caption d-none d-md-block">
                          <h5>First slide label</h5>
                          <p>Some representative placeholder content for the first slide.</p>
                      </div>
                  </div>
                  <div class="col">
                      <img src="https://th.bing.com/th/id/OIP.MgnmS2dzOO-VuBTPJibR0gHaEK?w=321&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" class="d-block w-100" alt="...">
                      <div class="carousel-caption d-none d-md-block">
                          <h5>Second slide label</h5>
                          <p>Some representative placeholder content for the second slide.</p>
                      </div>
                  </div>
              </div>
          </div>
          <div class="carousel-item">
              <div class="row">
                  <div class="col">
                      <img src="https://th.bing.com/th/id/OIP.MgnmS2dzOO-VuBTPJibR0gHaEK?w=321&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" class="d-block w-100" alt="...">
                      <div class="carousel-caption d-none d-md-block">
                          <h5>Third slide label</h5>
                          <p>Some representative placeholder content for the third slide.</p>
                      </div>
                  </div>
                  <div class="col">
                    <img src="https://th.bing.com/th/id/OIP.MgnmS2dzOO-VuBTPJibR0gHaEK?w=321&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Four slide label</h5>
                        <p>Some representative placeholder content for the third slide.</p>
                    </div>
                  </div>
              </div>
          </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
      </button>
  </div>
  
  <!-- Carousel end -->


  <!-- Start CelenderMain --> 
  <div class="d-grid gap-2 d-md-block p-1 my-4" style="border: 1px solid; border-radius: 5px">
    <div class="d-flex justify-content-around">
        <a href="{% url 'home:home' %}" class="btn-link"><button id="btn-moi" class="btn btn-light px-5 active" type="button"><span style="font-weight:bold;margin:0px">Mới</span><p style="margin:0px">Cập Nhật</p></button></a>
        <button id="btn-mon" class="btn btn-light px-4" type="button" onclick="showDay('Monday')"><span style="font-weight:bold;margin:0px">Mon</span><p style="margin:0px">Thứ Hai</p></button>
        <button id="btn-tue" class="btn btn-light px-4" type="button" onclick="showDay('Tuesday')"><span style="font-weight:bold;margin:0px">Tue</span><p style="margin:0px">Thứ Ba</p></button>
        <button id="btn-wed" class="btn btn-light px-4" type="button" onclick="showDay('Wednesday')"><span style="font-weight:bold;margin:0px">Wed</span><p style="margin:0px">Thứ Tư</p></button>
        <button id="btn-thu" class="btn btn-light px-4" type="button" onclick="showDay('Thursday')"><span style="font-weight:bold;margin:0px">Thu</span><p style="margin:0px">Thứ Năm</p></button>
        <button id="btn-fri" class="btn btn-light px-4" type="button" onclick="showDay('Friday')"><span style="font-weight:bold;margin:0px">Fri</span><p style="margin:0px">Thứ Sáu</p></button>
        <button id="btn-sat" class="btn btn-light px-4" type="button" onclick="showDay('Saturday')"><span style="font-weight:bold;margin:0px">Sat</span><p style="margin:0px">Thứ Bảy</p></button>
        <button id="btn-sun" class="btn btn-light px-5" type="button" onclick="showDay('Sunday')"><span style="font-weight:bold;margin:0px">Sun</span><p style="margin:0px">Chủ Nhật</p></button>
    </div>
  </div> 

  {% for day, films in schedule.items %}
  <div id="{{ day }}" class="day-container" style="display: none;">
    <h4 class="border-bottom pb-1">{{ day }}</h4>
    <div class="row my-4">
      {% for film in films %}
        <div class="col-md-3 my-3">
          <div class="card mb-3 shadow custom-card">
            <img src="{{ film.film.hinhanh.url }}" class="card-img-top" alt="{{ film.film.title }}">
            <div class="card-body d-flex flex-column justify-content-center p-1">
              <h6 class="card-title text-center " style="height:30px; margin-top:0px;margin-bottom:0px">{{ film.film.title }}</h6>   
              <p class="card-title text-center " style="height:30px; margin-top:5px; margin-bottom:0px; font-size: 13px; font-style:italic">{{ film.film.sub_title }}</p>
              <hr class="m-2 p-0"> 
              <p class="card-text px-5"><a href="{% url 'home:info_films' film.film.id %}" class="btn btn-sm btn-primary mx-3">Xem ngay</a></p>
            </div>    
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endfor %}

  <style>
    .custom-card {
        height: 100%; /* Đặt chiều cao cố định cho card */
    }
  </style>
    <div class="container mt-3 mb-5">
      <h4 class="border-bottom pb-1">Mới cập nhật <a href="#" class="float-right btn btn-sm btn-dark">Tất cả</a></h4>
      <div class="row my-4">
        {% for film in films %}
        <div class="col-md-3 my-3">
          <div class="card mb-3 shadow custom-card">
            <img src="{{ film.hinhanh.url }}" class="card-img-top" alt="{{ film.title }}">
            <div class="card-body d-flex flex-column justify-content-center p-1">
              <h6 class="card-title text-center " style="height:30px; margin-top:0px;margin-bottom:0px">{{ film.title }}</h6>   
              <p class="card-title text-center " style="height:30px; margin-top:5px; margin-bottom:0px; font-size: 13px; font-style:italic">{{ film.sub_title }}</p>
              <hr class="m-2 p-0"> 
              <p class="card-text px-5"><a href="{% url 'home:info_films' film.id %}" class="btn btn-sm btn-primary mx-3">Xem ngay</a></p>
            </div>
          </div>
        </div>
        {% endfor %}
        </div>
    <div class="pagination d-flex justify-content-center my-5" >
      <span class="step-links">
        {% if films.has_previous %}
          <a href="?page=1" class="btn btn-sm btn-outline-secondary">&laquo; 1</a>
          <a href="?page={{ films.previous_page_number }}" class="btn btn-sm btn-outline-secondary">&lsaquo; {{ films.previous_page_number }}</a>
        {% endif %}
        <span class="current">Page {{ films.number }} of {{ films.paginator.num_pages }}</span>
        {% if films.has_next %}
          <a href="?page={{ films.next_page_number }}" class="btn btn-sm btn-outline-secondary">{{ films.next_page_number }} &rsaquo;</a>
          <a href="?page={{ films.paginator.num_pages }}" class="btn btn-sm btn-outline-secondary">{{ films.paginator.num_pages }} &raquo;</a>
        {% endif %}
      </span>
    </div>
  </div>

  <!-- CelenderMain End -->
  <script>
    function showDay(day) {
        // Ẩn tất cả các div chứa active
        document.querySelectorAll('.day-container').forEach(function(dayContainer) {
          dayContainer.style.display = 'none';  
        });
        // Hiển thị div chứa phim của ngày được chọn
        document.getElementById(day).style.display = 'block'; 
        // Thay đổi màu sắc của nút được nhấp vào
        document.querySelectorAll('.btn').forEach(function(btn) {
          btn.classList.remove('active'); // Loại bỏ lớp 'active' khỏi tất cả các nút
        });
        document.getElementById('btn-' + day.toLowerCase()).classList.add('active'); // Thêm lớp 'active' vào nút được nhấp vào
      }
  </script> 

</main>

{% endblock %}x